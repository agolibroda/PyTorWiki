Права доступа
Права доступа к статьям

Субъекты: Пользователи

Объекты: Статьи; 
	Статьи могут быть «публичными»  «групповыми» и «личными».


Агрегаторы: Группы ( объединяет статьи и пользователей ); 
	Группы могут быть «публичными» и «закрытыми» .

В группы участники принимаются только после запроса. 
В любой группе есть "АДМИН" (хотя бы один) админ "принимает" участников в группу, удаляет их
Присвоить роль "АДМИНА" участнику может только "АДМИН" - похоже, "админ" это роль.
   

Статья имеет особое свойство «разрешения» 
    'pbl' - публично
    'grp' – права определяются группой
    'sol' – персональная статья, читать и редактировать ее может только автор. 
    	Скорее всего, персональные статьи могут лежать только в персональной папке 
    
    
Группа описывается данными о пользователях, входящих в группу, и статьями, принадлежащими группе;
Одна статья моет принадлежать нескольким группам. 
в записи о принадлежности статьи есть поле «права» - там значение – или «читать» или «читать/писать» если записи нет, тогда «ой»

алгоритм проверки прав доступа:
1. если статья – имеет флаг 'pbl' то всем пользователям можно читать и редактировать данную статью
2. статья с флагом 'sol' не доступна никому, кроме автора.
3. статья с флагом 'grp' – надо сделать выборку всех записей с групп, участником которых является пользователь, 
и проверить, есть ли в группах запись о конкретной статье с нужным (по случаю) флагом (читать или писать) … 
ну, и действовать по полученному результату – или, отдать материал в работу, или… 


Персональный рабочий стол

Список всех статей, которые написал Автор 
или, отметил как "интересные" (ОБА-НА!!!!)
в списке НАДО показывать названия групп, в которых набраны статьи....
да и показывать разрешения для статьи  

Список Групп  - названия  - показывать все, и показывать статус группы (публ/закр) 
- в "Рабочий стол группы" закрытой группы - попасть может только участник

есть еще один аспект 
Статью можно:
- комментировать (да/нет)
- редактировать (да/нет)
- оценивать (да/нет) кстати, оценок может быть несколько 
	- и автор может выбрать какими оценками оценивать его статью (или не автор???? )  



"Святая святых" для любой информационной системы  - это база данных 
Что бы снизить моральную нагрузку на АТМИНА :-) я решил, 
что все статьи, имеющие грф "sol" или "grp" будут в базе храниться "закрытыми" :-) 

механизм: 
при регистрации система для Автора генерирует пару RSA- ключей. :-) 
статьи с флагом "sol" перед сохранением в базу кодируется открытым ключом Автора. 
Перед редактированием статья декодируется закрытым ключом Автора, и отдается ему на редактирование.

Для статей с флагом "grp" работают ключи группы. которые генерируется при создании группы.

Место хранения ключей: 
Открытый ключ хранится в поле таблицы "dt_header"

Закрытые ключи:
- Автора - в профиле Автора - таблице "authors", ключ храним закодированным паролем Автора (который применяется при логине)
 
- Группы - с группой все сложнее. просто в профиль добавлять ключ не нужно - у группы много участников, и каждых должен иметь возможность 
читать групповые статьи. поэтому, я ввожу новую табличку "grups_keys" в которую для каждого Участника и каждой группы помещается приватный ключ группы, 
закрытый открытым ключом Автора-Участника группы. 






